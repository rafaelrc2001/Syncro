<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Syncro - Nuevo Permiso Completo</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
  <!--  <link rel="stylesheet" href="/CSS/EstiloFormularios.css" /> -->
    <link rel="stylesheet" href="P-ECCSS.css" />
    <!-- <link rel="stylesheet" href="/Modules/Fomularios/Generales/seccion2.css">-->
    <!-- <link rel="stylesheet" href="/Modules/Fomularios/Generales/seccion2.css">-->
  <link rel="stylesheet" href="/CSS/EstiloFormularios.css">

  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar (igual al existente) -->
      <aside class="sidebar">
        <!-- Contenido del sidebar igual al original -->
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <header class="main-header">
          <h1>
            <span style="font-size: 1.5rem">🧰</span> Permiso de Trabajo  Espacio confinado
          </h1>
          <div class="header-actions">
            <button class="btn secondary" id="back-btn">
              <i class="ri-arrow-left-line"></i> Volver
            </button>
          </div>
        </header>




        <!-- Progress Steps -->
        <div class="progress-container">
          <div class="progress-steps">
            <div class="step active" data-step="1">
              <div class="step-number">1</div>
              <div class="step-title">Encabezado</div>
            </div>
            <div class="step" data-step="2">
              <div class="step-number">2</div>
              <div id="PermisoNP" class="step-title">
                Permiso Espacio confinado
              </div>
            </div>
            <div class="step" data-step="3">
              <div class="step-number">3</div>
              <div class="step-title">Participantes</div>
            </div>
            <div class="step" data-step="4">
              <div class="step-number">4</div>
              <div class="step-title">AST</div>
            </div>
          </div>
        </div>

        <!-- Form Sections -->
        <form id="complete-permit-form">
          <!-- Sección 1: Encabezado -->
          <section class="form-section active" data-section="1">
            <div class="form-container">
              <div class="form-header">
                <div class="form-icon">
                  <i class="ri-file-text-line"></i>
                </div>
                <div>
                  <h2>Información General del Permiso</h2>
                  <p>Complete los datos básicos del permiso</p>
                </div>
              </div>

              <div class="form-grid">
                <!--    <div class="form-group">
                                <label for="permit-number">Número de Permiso</label>
                                <input type="text" id="permit-number" name="permit-number" readonly value="GSI-SI-FO-002-XXXX">
                            </div>
                        -->
                <div class="form-group">
                  <label for="permit-date">Fecha</label>
                  <input
                    type="date"
                    id="permit-date"
                    name="permit-date"
                    required
                  />
                </div>

                <div class="form-group">
                  <label for="company">Empresa</label>
                  <input type="text" id="company" name="company" required />
                </div>

                <div class="form-group">
                  <label for="subcontract">Subcontrata</label>
                  <input
                    type="text"
                    id="subcontract"
                    name="subcontract"
                    value="PRO-AGROINDUSTRIA"
                  />
                </div>

                <div class="form-group">
                  <label for="area">Sucursal</label>
                  <div class="select-wrapper">
                    <select id="sucursal" name="sucursal" required>
                      <option value="" disabled selected>
                        Seleccione una sucursal
                      </option>
                    </select>
                    <i class="ri-arrow-down-s-line select-arrow"></i>
                  </div>
                </div>

                <div class="form-group">
                  <label for="plant">Planta o lugar de trabajo</label>
                  <div class="autocomplete-container">
                    <input
                      type="text"
                      id="plant"
                      name="plant"
                      required
                      placeholder="Escriba para buscar..."
                      class="autocomplete-input"
                      autocomplete="off"
                    />
                    <div
                      id="plant-suggestions"
                      class="autocomplete-suggestions"
                    ></div>
                    <input type="hidden" id="plant-value" name="plant-value" />
                    <input
                      type="hidden"
                      id="plant-id-hidden"
                      name="plant-id-hidden"
                    />
                  </div>
                </div>

                <div class="form-group">
                  <label for="applicant">Nombre de quien solicita</label>
                  <input
                    type="text"
                    id="applicant"
                    name="applicant"
                    required
                    class="compact"
                  />
                </div>

                <div class="form-group">
                  <label for="work-description">Descripción del trabajo</label>
                  <textarea
                    id="work-description"
                    name="work-description"
                    rows="2"
                    required
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="contract-number"
                    >Número de contrato
                    <span style="font-weight: normal; color: #888"
                      >(opcional, solo si lo tienen)</span
                    ></label
                  >
                  <input
                    type="text"
                    id="contract-number"
                    name="contract-number"
                    class="compact"
                    placeholder="Ingrese el número de contrato si aplica"
                  />
                </div>
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  id="seccion1"
                  class="btn primary next-step"
                  data-next="2"
                >
                  Siguiente <i class="ri-arrow-right-line"></i>
                </button>
              </div>
            </div>
            <!-- Fin Sección 1: Encabezado -->
          </section>

          <!-- Sección 2: Entrada a Espacios Confinados -->
         <section class="form-section" data-section="2" id="permiso-np-section">
          <div class="form-container" id="permiso-np-container">
            <div class="form-header" id="permiso-np-header">
                <div class="form-icon" id="permiso-np-icon">
                    <i class="ri-survey-line"></i>
                </div>
                <div id="permiso-np-header-text">
                    <h2>Formulario</h2>
                    <p>Complete los datos básicos del permiso</p>
                </div>
            </div>
            <div id="permiso-np-header-divider"></div>

            
        <div class="color-section gray-section">
            <div class="form-grid" id="permiso-np-grid1">
                <div class="form-group">
                    <div class="form-group">
                        <label for="maintenance-type">Tipo de mantenimiento</label>
                        <select id="maintenance-type" name="maintenance-type" required>
                            <option value="" disabled selected>Seleccione un tipo</option>
                            <option value="PREDICTIVO">PREDICTIVO</option>
                            <option value="PREVENTIVO">PREVENTIVO</option>
                            <option value="CORRECTIVO">CORRECTIVO</option>
                            <option value="APOYO">APOYO</option>
                            <option value="OTRO">OTRO</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="work-order">O.T. No.</label>
                        <input type="text" id="work-order" name="work-order" required class="compact">
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="start-time">Hora de inicio</label>
                        <input type="time" id="start-time" name="start-time" required class="compact">
                    </div>
                </div>
            </div>





            <div id="permiso-np-header-divider"></div>

            <div class="form-section-title" id="permiso-np-equipo-title">
                <i class="ri-tools-line"></i>
                <h3>Equipo</h3>
            </div>
            <div class="form-grid" id="permiso-np-grid2">
                <div class="form-group">
                    <label>¿Tiene equipo a intervenir?</label>
                    <div class="radio-group" id="equipment-toggle">
                        <label class="radio-option">
                            <input type="radio" name="has-equipment" value="si" checked>
                            <span class="radio-custom"></span>
                            Sí
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="has-equipment" value="no">
                            <span class="radio-custom"></span>
                            No
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="equipment">Equipo a Intervenir</label>
                        <input type="text" id="equipment" name="equipment" required class="compact">
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="tag">TAG</label>
                        <input type="text" id="tag" name="tag" class="compact">
                    </div>
                </div>
            </div>
        </div>


              <!-- Tabla: Medidas/Requisitos para Administrar los Riesgos -->
              <div class="color-section gray-section">
                <div class="form-section-title">
                  <i class="ri-shield-check-line"></i>
                  <h3>Medidas / Requisitos para administrar los riesgos</h3>
                </div>
                <div class="form-table">
                  <!-- Encabezado de opciones -->
                  <div class="options-header">
                    <div class="form-table-label"></div>
                    <div class="form-table-options">
                      <div class="options-labels">
                        <span class="option-label">SI</span>
                        <span class="option-label">NO</span>
                        <span class="option-label">N/A</span>
                      </div>
                    </div>
                  </div>

                  <!-- Fila 1 -->
                  <div class="form-table-row">
                    <div class="form-table-label">
                      <label
                        >¿En los registros de entrada se colocaron avisos de
                        trabajos en espacios confinados?</label
                      >
                    </div>
                    <div class="form-table-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input type="radio" name="warning-signs" value="SI"
                        /></label>
                        <label
                          ><input type="radio" name="warning-signs" value="NO"
                        /></label>
                        <label
                          ><input type="radio" name="warning-signs" value="N/A"
                        /></label>
                      </div>
                    </div>
                  </div>

                  <!-- Fila 2 -->
                  <div class="form-table-row">
                    <div class="form-table-label">
                      <label
                        >¿Se instaló la iluminación interior, a prueba de
                        explosión con cable de uso rudo sin uniones?</label
                      >
                    </div>
                    <div class="form-table-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input
                            type="radio"
                            name="explosion-proof-lighting"
                            value="SI"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="explosion-proof-lighting"
                            value="NO"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="explosion-proof-lighting"
                            value="N/A"
                        /></label>
                      </div>
                    </div>
                  </div>

                  <!-- Fila 3 -->
                  <div class="form-table-row">
                    <div class="form-table-label">
                      <label>¿Se instaló ventilación forzada?</label>
                    </div>
                    <div class="form-table-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input
                            type="radio"
                            name="forced-ventilation"
                            value="SI"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="forced-ventilation"
                            value="NO"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="forced-ventilation"
                            value="N/A"
                        /></label>
                      </div>
                    </div>
                  </div>

                  <!-- Fila 4 -->
                  <div class="form-table-row">
                    <div class="form-table-label">
                      <label
                        >¿Los trabajadores resultaron aptos en la evaluación
                        médica?</label
                      >
                    </div>
                    <div class="form-table-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input
                            type="radio"
                            name="medical-evaluation"
                            value="SI"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="medical-evaluation"
                            value="NO"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="medical-evaluation"
                            value="N/A"
                        /></label>
                      </div>
                    </div>
                  </div>

                  <!-- Fila 5 -->
                  <div class="form-table-row">
                    <div class="form-table-label">
                      <label>¿Tiene cable de vida los trabajadores?</label>
                    </div>
                    <div class="form-table-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input type="radio" name="lifeline" value="SI"
                        /></label>
                        <label
                          ><input type="radio" name="lifeline" value="NO"
                        /></label>
                        <label
                          ><input type="radio" name="lifeline" value="N/A"
                        /></label>
                      </div>
                    </div>
                  </div>

                  <!-- Fila 6 - Con campo adicional -->
                  <div class="form-table-row combined-row">
                    <div class="form-table-label">
                      <label>¿Existe vigilancia en el exterior?</label>
                    </div>
                    <div class="form-table-options combined-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input type="radio" name="external-watch" value="SI"
                        /></label>
                        <label
                          ><input type="radio" name="external-watch" value="NO"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="external-watch"
                            value="N/A"
                        /></label>
                      </div>
                      <div class="combined-input">
                        <label class="inline-label">Nombre:</label>
                        <input
                          type="text"
                          name="external-watch-name"
                          class="compact"
                          placeholder="Nombre del vigilante"
                        />
                      </div>
                    </div>
                  </div>

                  <!-- Fila 7 - Con campo adicional -->
                  <div class="form-table-row combined-row">
                    <div class="form-table-label">
                      <label>¿Se requiere personal rescatista?</label>
                    </div>
                    <div class="form-table-options combined-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input
                            type="radio"
                            name="rescue-personnel"
                            value="SI"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="rescue-personnel"
                            value="NO"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="rescue-personnel"
                            value="N/A"
                        /></label>
                      </div>
                      <div class="combined-input">
                        <label class="inline-label">Nombre:</label>
                        <input
                          type="text"
                          name="rescue-personnel-name"
                          class="compact"
                          placeholder="Nombre del rescatista"
                        />
                      </div>
                    </div>
                  </div>

                  <!-- Fila 8 -->
                  <div class="form-table-row">
                    <div class="form-table-label">
                      <label
                        >¿Se requiere instalar barreras y/o barricadas?</label
                      >
                    </div>
                    <div class="form-table-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input type="radio" name="barriers" value="SI"
                        /></label>
                        <label
                          ><input type="radio" name="barriers" value="NO"
                        /></label>
                        <label
                          ><input type="radio" name="barriers" value="N/A"
                        /></label>
                      </div>
                    </div>
                  </div>

                  <!-- Fila 9 - Con campo adicional -->
                  <div class="form-table-row combined-row">
                    <div class="form-table-label">
                      <label>¿Se requiere equipo especial?</label>
                    </div>
                    <div class="form-table-options combined-options">
                      <div class="yes-no-na compact">
                        <label
                          ><input
                            type="radio"
                            name="special-equipment"
                            value="SI"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="special-equipment"
                            value="NO"
                        /></label>
                        <label
                          ><input
                            type="radio"
                            name="special-equipment"
                            value="N/A"
                        /></label>
                      </div>
                      <div class="combined-input">
                        <label class="inline-label">¿Cuál?:</label>
                        <input
                          type="text"
                          name="special-equipment-type"
                          class="compact"
                          placeholder="Tipo de equipo especial"
                        />
                      </div>
                    </div>
                  </div>

                  <!-- Sección compacta en mosaico -->
                  <div class="mosaic-grid">
                    <div class="mosaic-item">
                      <label for="authorized-personnel"
                        >Número de personas autorizadas</label
                      >
                      <input
                        type="number"
                        id="authorized-personnel"
                        name="authorized-personnel"
                        min="1"
                        class="compact-input"
                      />
                    </div>

                    <div class="mosaic-item">
                      <label for="stay-time">Tiempo de permanencia (min)</label>
                      <input
                        type="number"
                        id="stay-time"
                        name="stay-time"
                        min="1"
                        class="compact-input"
                      />
                    </div>

                    <div class="mosaic-item">
                      <label for="recovery-time"
                        >Tiempo de recuperación (min)</label
                      >
                      <input
                        type="number"
                        id="recovery-time"
                        name="recovery-time"
                        min="1"
                        class="compact-input"
                      />
                    </div>

                    <div class="mosaic-item">
                      <label for="confined-space-type"
                        >Clase de espacio confinado</label
                      >
                      <input
                        type="text"
                        id="confined-space-type"
                        name="confined-space-type"
                        class="compact-input"
                      />
                    </div>
                  </div>

                  <div class="form-table-row compact-row">
                    <div class="form-table-label">
                      <label for="observations"
                        >Observaciones adicionales</label
                      >
                    </div>
                    <div class="form-table-options">
                      <textarea
                        id="observations"
                        name="observations"
                        rows="2"
                        placeholder="Ingrese cualquier observación adicional"
                      ></textarea>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  class="btn secondary prev-step"
                  data-prev="1"
                >
                  <i class="ri-arrow-left-line"></i> Anterior
                </button>
                <button
                  type="button"
                  class="btn primary next-step"
                  data-next="3"
                >
                  Siguiente <i class="ri-arrow-right-line"></i>
                </button>
              </div>
            </div>
          </section>
            

             <!-- Sección 3: Participantes -->
             <section class="form-section" data-section="3">
                <div class="form-container">
                    <div class="form-header">
                        <div class="form-icon" style="background: linear-gradient(135deg, #2196F3 0%, #0D47A1 100%);">
                            <i class="ri-team-line"></i>
                        </div>
                        <div>
                            <h2>Personal Participante</h2>
                            <p>Registre a todas las personas involucradas</p>
                        </div>
                    </div>

                    <div class="participants-table">
                        <div class="participants-header">
                            <div>No.</div>
                            <div>Nombre</div>
                            <div>No. Credencial</div>
                            <div>Cargo</div>
                            <div>Función</div>
                            <div>Acciones</div>
                        </div>

                        <div class="participant-row" data-index="1">
                            <div class="participant-number">1</div>
                            <div class="participant-field">
                                <input type="text" name="participant-name-1" required>
                            </div>
                            <div class="participant-field">
                                <input type="text" name="participant-credential-1" required>
                            </div>
                            <div class="participant-field">
                                <input type="text" name="participant-position-1" required>
                            </div>
                            <div class="participant-field">
                                <select name="participant-role-1" required>
                                    <option value="">Seleccione...</option>
                                    <option value="PARTICIPA">Participa</option>
                                    <option value="REVISA">Revisa</option>
                                    <option value="ANALIZA">Analiza</option>
                                    <option value="AUTORIZA">Autoriza</option>
                                </select>
                            </div>
                            <div class="participant-actions">
                                <button type="button" class="action-btn remove-participant" title="Eliminar">
                                    <i class="ri-delete-bin-line"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn secondary" id="add-participant">
                        <i class="ri-user-add-line"></i> Añadir Participante
                    </button>

                    <div class="form-section-title">
                        <i class="ri-shield-user-line"></i>
                        <h3>Equipo de Protección Personal</h3>
                    </div>

                    <div class="form-group">
                        <textarea id="ppe-required" name="ppe-required" rows="2" placeholder="Describa el EPP requerido"></textarea>
                    </div>

                    <div class="form-section-title">
                        <i class="ri-tools-line"></i>
                        <h3>Maquinaria, Equipo y Herramientas</h3>
                    </div>

                    <div class="form-group">
                        <textarea id="equipment-tools" name="equipment-tools" rows="2" placeholder="Liste maquinaria y herramientas a utilizar"></textarea>
                    </div>

                    <div class="form-section-title">
                        <i class="ri-box-line"></i>
                        <h3>Materiales y Accesorios</h3>
                    </div>

                    <div class="form-group">
                        <textarea id="materials" name="materials" rows="2" placeholder="Liste materiales y accesorios necesarios"></textarea>
                    </div>
                
                    <div class="form-actions">
                        <button type="button" class="btn secondary prev-step" data-prev="2">
                            <i class="ri-arrow-left-line"></i> Anterior
                        </button>
                        <button type="button" id="btn-save-participants" class="btn primary next-step" data-next="4">
                            Siguiente <i class="ri-arrow-right-line"></i>
                        </button>
                    </div>
                
            </section>

<!-- Sección 4: AST -->
            <section class="form-section" data-section="4">
                <div class="form-container">
                    <div class="form-header">
                        <div class="form-icon" style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);">
                            <i class="ri-alert-line"></i>
                        </div>
                        <div>
                            <h2>Análisis de Seguridad en el Trabajo (AST)</h2>
                            <p>Describa las actividades y riesgos asociados</p>
                        </div>
                    </div>

                    <div class="ast-activities extended">
                        <div class="ast-table-header">
                            <div>No.</div>
                            <div>Secuencia de la Actividad</div>
                            <div>Personal Ejecutor</div>
                            <div>Peligros Potenciales</div>
                            <div>Acciones Preventivas</div>
                            <div>Responsable</div>
                            <div>Acciones</div>
                        </div>
                    
                        <div class="ast-activity" data-index="1">
                            <div class="ast-activity-number">1</div>
                            <div class="ast-activity-field">
                                <textarea name="ast-activity-1" rows="2"></textarea>
                            </div>
                            <div class="ast-activity-field">
                                <select name="ast-personnel-1" required>
                                    <option value="">-- Seleccione --</option>
                                </select>
                            </div> 
                            <div class="ast-activity-field">
                                <textarea name="ast-hazards-1" rows="2" required></textarea>
                            </div>
                            <div class="ast-activity-field">
                                <textarea name="ast-preventions-1" rows="2"></textarea>
                            </div>
                            <div class="ast-activity-field">
                                <select name="ast-responsible-1" required>
                                    <option value="">-- Seleccione --</option>
                                </select>
                            </div>
                            <div class="ast-activities-actions">
                                <button type="button" class="action-btn remove-participant" title="Eliminar">
                                    <i class="ri-delete-bin-line"></i>
                                </button>
                            </div>
                        </div>
                        
                    </div>
                    

                    <button type="button" class="btn secondary" id="add-activity">
                        <i class="ri-add-line"></i> Añadir Actividad
                    </button>

                    <div class="form-actions">
                        <button type="button" class="btn secondary prev-step" data-prev="3">
                            <i class="ri-arrow-left-line"></i> Anterior
                        </button>
                        <button type="submit" class="btn primary">
                            <i class="ri-save-line"></i> Guardar Permiso Completo
                        </button>
                       
                    </div>
                    
                </div>
            </section>



        </form>
    </main>
</div>

    <!-- Modal de confirmación -->
    <div class="modal" id="confirmation-modal">
      <div class="modal-content">
        <div class="modal-icon success">
          <i class="ri-checkbox-circle-line"></i>
        </div>
        <h3>Permiso creado exitosamente</h3>
        <p>
          El permiso de trabajo con AST ha sido registrado en el sistema con el
          número: <strong id="generated-permit">GSI-SI-FO-003-XXXX</strong>
        </p>
        <div class="modal-actions">
          <button class="btn secondary" id="modal-close-btn">Cerrar</button>
          
        </div>
      </div>
    </div>

    <!-- Modal de confirmación -->
    <div class="modal" id="confirmation-modal">
      <div class="modal-content">
        <div class="modal-icon success">
          <i class="ri-checkbox-circle-line"></i>
        </div>
        <h3>Permiso creado exitosamente</h3>
        <p>
          El permiso de trabajo con AST ha sido registrado en el sistema con el
          número: <strong id="generated-permit">GSI-SI-FO-002-XXXX</strong>
        </p>
        <div class="modal-actions">
          <button class="btn secondary" id="modal-close-btn">Cerrar</button>
        </div>
      </div>
    </div>

    <script src="/Modules/Fomularios/Generales/email.js"></script>
    <script src="/Modules/Fomularios/Generales/seccion1.js"></script>
   <!-- <script src="/Modules/Fomularios/PT3/seccion2.js"></script>-->
    <script src="/Modules/Fomularios/Generales/seccion3.js"></script>
    <script src="/Modules/Fomularios/Generales/seccion4.js"></script>
    <script src="/Modules/Fomularios/Generales/navegacion.js"></script>
  </body>
</html>
