<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permiso No Peligroso</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
        <link rel="stylesheet" href="/CSS/EstiloGeneral.css" />
   <!--<link rel="stylesheet" href="/CSS/EstiloVer.css">-->
   <link rel="stylesheet" href="/CSS/EstiloImprimir.css">
      <link rel="stylesheet" href="/CSS/imprimir/EstiloImprimir-Base.css">
</head>
<body style="background: #f4f6fb; min-height: 100vh; margin: 0; font-family: 'Roboto', Arial, sans-serif;">
        <div style="display: flex; justify-content: center; align-items: flex-start; min-height: 100vh;">
            <section class="form-section" data-section="2" style="max-width: 900px; width: 100%; margin: 40px 0; background: #fff; border-radius: 18px; box-shadow: 0 4px 24px rgba(44,62,80,0.10); padding: 2.5rem 2rem;">
                <div class="company-header">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <img src="/img/proagro.png" alt="Logo ProAgro" style="height: 60px; width: auto;">
                </div>
                <div style="text-align: center; flex-grow: 1;">
                    <h1 style="margin: 0; color: #2c3e50; font-size: 1.5rem; font-weight: 600;">SISTEMA DE PERMISOS DE TRABAJO</h1>
                    <p style="margin: 0.5rem 0 0 0; color: #7f8c8d; font-size: 0.9rem;">Gestión Integral de Seguridad Laboral</p>
                </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                    <img src="/img/pemex.png" alt="Logo PEMEX" style="height: 60px; width: auto;">
                </div>
         
            </div>
                 <div class="section-header header-centered">
                    <i class="ri-checkbox-circle-line"></i>
                    <h2>Permiso de Trabajo No Peligroso</h2>
                    <h3>NP-XXXXXX</h3>
                </div>
                               
                                    <div class="general-box-header">
                                        <span>Información General</span>
                                    </div>


                                        <div  id="hora-creacion-header" style="text-align: center;">
                                            <i class="ri-time-line"></i>
                                            <h3>Hora de creación</h3>
                                        </div>

                  <div class="executive-section " style="margin-bottom: 0; box-shadow: none; background: transparent; border: none;">
                      
                    
                      <div class="executive-grid">
                          <div class="executive-item">
                              <label>Hora de inicio</label>
                              <p id="start-time-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>Fecha</label>
                              <p id="fecha-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>Tipo de actividad</label>
                              <p id="activity-type-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>Planta o lugar de trabajo</label>
                              <p id="plant-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>Descripción del trabajo</label>
                              <p id="descripcion-trabajo-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>Empresa</label>
                              <p id="empresa-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>Nombre de quien solicita</label>
                              <p id="nombre-solicitante-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>Sucursal</label>
                              <p id="sucursal-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>Contrato</label>
                              <p id="contrato-label">-</p>
                          </div>
                          <div class="executive-item">
                              <label>O.T. No.</label>
                              <p id="work-order-label">-</p>
                          </div>
                      </div>
                </div>


                <div class="executive-section ">
                    <div class="section-header">
                        <i class="ri-tools-line"></i>
                        <h3>Equipo</h3>
                    </div>
                    <div class="executive-grid">
                        <div class="executive-item">
                            <label>Equipo a Intervenir</label>
                            <p id="equipment-label">-</p>
                        </div>
                        <div class="executive-item">
                            <label>TAG</label>
                            <p id="tag-label">-</p>
                        </div>
                    </div>
                </div>

  



             
                                    <div class="area-box-header">
                                         <span>Formulario Responsable Área</span>
                                     </div>
              

                                           <div  id="hora-responsable-header" style="text-align: center;">
                                    <i class="ri-time-line"></i>
                                    <h3>Hora de autorización</h3>
                    </div>


                    
                <div class="executive-section ">
                    <div class="section-header ">
                        <i class="ri-flask-line"></i>
                        <h3>Condiciones del Proceso</h3>
                    </div>
                    <div class="executive-grid">
                        <div class="executive-item">
                            <label for="fluid">Fluido</label>
                            <p id="fluid" class="highlight">-</p>
                        </div>
                        <div class="executive-item">
                            <label for="pressure">Presión</label>
                            <p id="pressure">-</p>
                        </div>
                        <div class="executive-item">
                            <label for="temperature">Temperatura</label>
                            <p id="temperature">-</p>
                        </div>
                    </div>
                </div>
                <div class="executive-section">
                    <div class="section-header">
                        <i class="ri-checkbox-multiple-line"></i>
                        <h3>Análisis Previo al Trabajo</h3>
                    </div>
                    <form id="form-no-peligroso-analisis">
                        <table class="styled-table" style="width:100%; background:#fff; border-radius:8px; overflow:hidden;">
                            <thead>
                                <tr>
                                    <th>Pregunta</th>
                                    <th class="centered">Respuesta</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>¿El trabajo se realizará en un área de riesgo controlado?</td>
                                    <td class="centered"><span id="resp-risk-area">-</span></td>
                                </tr>
                                <tr>
                                    <td>¿Se necesita entrega física, para efectuar el trabajo por parte del personal de la planta o departamento?</td>
                                    <td class="centered"><span id="resp-physical-delivery">-</span></td>
                                </tr>
                                <tr>
                                    <td>¿El personal que va a ejecutar el trabajo, necesita equipo de protección personal adicional al estándar del área donde se desarrollará el trabajo?</td>
                                    <td class="centered"><span id="resp-additional-ppe">-</span></td>
                                </tr>
                                <tr>
                                    <td>¿En el área circundante se efectuarán trabajos con riesgo?</td>
                                    <td class="centered"><span id="resp-surrounding-risk">-</span></td>
                                </tr>
                                <tr>
                                    <td>¿Necesita supervisión el personal?</td>
                                    <td class="centered"><span id="resp-supervision-needed">-</span></td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="executive-item" style="margin-top:1em;">
                            <label for="pre-work-observations">Observaciones adicionales:</label>
                            <p id="pre-work-observations" style="width:100%; min-height:38px; background:#fff; border:1px solid #d0d7de; border-radius:6px; padding:6px 10px; margin:0;">-</p>
                        </div>

                        </div>






                <!-- Sección AST y Participantes -->
                   
                <div class="executive-section">
                    <div class="section-header">
                        <i class="ri-shield-check-line"></i>
                        <h3>AST - Análisis de Seguridad en el Trabajo</h3>
                    </div>
                    <div class="ast-summary">
                        <table class="ast-table">
                            <thead>
                                <tr>
                                    <th>No.</th>
                                    <th>Secuencia de la Actividad</th>
                                    <th>Personal Ejecutor</th>
                                    <th>Peligros Potenciales</th>
                                    <th>Acciones Preventivas</th>
                                    <th>Responsable</th>
                                </tr>
                            </thead>
                            <tbody id="modal-ast-actividades-body">
                                <!-- Actividades AST dinámicas -->
                            </tbody>
                        </table>
                    </div>
                    <div class="safety-grid">
                        <div class="safety-item">
                            <h4><i class="ri-shield-user-line"></i> EPP Requerido</h4>
                            <ul class="safety-list" id="modal-epp-list">
                                <li></li>
                            </ul>
                        </div>
                        <div class="safety-item">
                            <h4><i class="ri-tools-line"></i> Maquinaria y Herramientas</h4>
                            <ul class="safety-list" id="modal-maquinaria-list">
                                <li></li>
                            </ul>
                        </div>
                        <div class="safety-item">
                            <h4><i class="ri-box-line"></i> Materiales y Accesorios</h4>
                            <ul class="safety-list" id="modal-materiales-list">
                                <li></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Sección 4: Participantes -->
                <div class="executive-section">
                    <div class="section-header">
                        <i class="ri-team-line"></i>
                        <h3>Personal Involucrado</h3>
                    </div>
                    <div class="ast-summary">
                        <table class="ast-table">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Función</th>
                                    <th>Credencial</th>
                                    <th>Cargo</th>
                                </tr>
                            </thead>
                            <tbody id="modal-ast-participantes-body">
                                <!-- Participantes AST dinámicos -->
                            </tbody>
                        </table>
                    </div>
                </div>
                

     


                <div class="executive-section" style="display: flex; gap: 20px">
            <div style="flex: 1">
              <label
                for="responsable-aprobador"
                style="font-weight: 600; display: block; margin-bottom: 8px"
              >
                Seleccionar Supervisor de Seguridad:
              </label>
              <select
                id="responsable-aprobador"
                style="
                  width: 100%;
                  padding: 8px;
                  border-radius: 4px;
                  border: 1px solid #ccc;
                "
                onchange="actualizarAprobador(this.value)"
              >
                <option value="" disabled selected>
                  Seleccione un supervisor...
                </option>
                <option value="Juan Pérez Martínez">Juan Pérez Martínez</option>
                <option value="María García López">María García López</option>
                <option value="Carlos Rodríguez Sánchez">
                  Carlos Rodríguez Sánchez
                </option>
                <option value="Ana Martínez González">
                  Ana Martínez González
                </option>
                <option value="Luis Hernández Ramírez">
                  Luis Hernández Ramírez
                </option>
                <option value="Patricia Díaz Fernández">
                  Patricia Díaz Fernández
                </option>
              </select>
            </div>
            <div style="flex: 1">
              <label
                for="responsable-aprobador2"
                style="font-weight: 600; display: block; margin-bottom: 8px"
              >
                Seleccionar la categoria a la que pertenece:
              </label>
              <select
                id="responsable-aprobador2"
                style="
                  width: 100%;
                  padding: 8px;
                  border-radius: 4px;
                  border: 1px solid #ccc;
                "
                onchange="actualizarAprobador2(this.value)"
              >
                <option value="" disabled selected>
                  Seleccione una categoria...
                </option>
                <option value="Juan Pérez Martínez">SAMP</option>
                <option value="María García López">APT</option>
                <option value="Carlos Rodríguez Sánchez">UREA</option>
                <option value="Ana Martínez González">AREA 6</option>
              </select>
            </div>
          </div>

          <!-- Sección 5: Aprobaciones -->
                    <div class="approval-section">
                        <div class="approval-stamps">
                            <div class="stamp">
                                <div class="stamp-title">Responsable del area:</div>
                                <div class="stamp-placeholder"></div>
                                <div class="stamp-name" id="nombre-responsable-area">-</div>
                            </div>
                            <div class="stamp">
                                <div class="stamp-title">Operador del área:</div>
                                <div class="stamp-placeholder"></div>
                                <div class="stamp-name" id="nombre-operador-area">-</div>
                                <div class="stamp-date"></div>
                            </div>
                        </div>
     

             <div class="button-group" style="display: flex; justify-content: space-between; margin-top: 48px; gap: 16px;">
                     <button id="btn-salir-nuevo" class="btn btn-pt1 btn-salir-gris" type="button">
                        <i class="ri-logout-box-r-line" style="margin-right: 8px;"></i>Salir
                    </button>
                    <div style="display: flex; gap: 16px;">
            
                        <button id="btn-no-autorizar" class="btn btn-pt1 btn-noautorizar-rojo" type="button">
                            <i class="ri-close-circle-line" style="margin-right: 8px;"></i>No Autorizar
                        </button>
                        <button id="btn-guardar-campos" class="btn btn-pt1 btn-guardar-azulpetroleo" type="button">
                            <i class="ri-save-3-line" style="margin-right: 8px;"></i>Autorizar
                        </button>
                    </div>
            </div>



  <div id="modalComentario" class="modal-comentario" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(44,62,80,0.25); z-index:1000; justify-content:center; align-items:center;">
                                            <div style="background:#fff; border-radius:12px; max-width:400px; width:90vw; padding:2em 1.5em; box-shadow:0 4px 24px rgba(44,62,80,0.18); display:flex; flex-direction:column; gap:1em;">
                                                <h3 style="margin:0 0 0.5em 0; font-size:1.2em; color:#c0392b;"><i class="ri-close-circle-line" style="margin-right:8px;"></i>Motivo de No Autorización</h3>
                                                <textarea id="comentarioNoAutorizar" rows="4" style="width:100%; border:1px solid #d0d7de; border-radius:6px; padding:8px; resize:vertical;" placeholder="Escribe el motivo del rechazo..."></textarea>
                                                <div style="display:flex; justify-content:flex-end; gap:10px;">
                                                    <button id="btnCancelarComentario" type="button" style="background:#eee; color:#333; border:none; border-radius:4px; padding:6px 16px; cursor:pointer;">Cancelar</button>
                                                    <button id="btnGuardarComentario" type="button" style="background:#c0392b; color:#fff; border:none; border-radius:4px; padding:6px 16px; cursor:pointer;">Guardar</button>
                                                </div>
                                            </div>
                                        </div>
                                        



                                          <!-- Modal de confirmación -->
                        <div class="modal" id="confirmation-modal" style="display:none;">
                            <div class="modal-content">
                                <div class="modal-icon success">
                                    <i class="ri-checkbox-circle-line"></i>
                                </div>
                                <h3>Permiso autorizado correctamente</h3>
                                <p>El permiso de trabajo el número: <strong id="generated-permit">-</strong></p>
                                <div class="modal-actions">
                                    <button class="btn secondary" id="modal-close-btn">Cerrar</button>
                                    
                                </div>
                            </div>
                        </div>



                          <!-- Modal de confirmación de autorización -->
                        <div id="modalConfirmarAutorizar" class="modal-confirmar" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(44,62,80,0.25); z-index:1000; justify-content:center; align-items:center;">
                            <div style="background:#fff; border-radius:12px; max-width:400px; width:90vw; padding:2em 1.5em; box-shadow:0 4px 24px rgba(44,62,80,0.18); display:flex; flex-direction:column; gap:1em;">
                                <h3 style="margin:0 0 0.5em 0; font-size:1.2em; color:#2c3e50;">
                                <i class="ri-check-double-line" style="margin-right:8px;"></i>Confirmar Autorización
                                </h3>
                                    <p>¿Estás seguro que deseas autorizar este permiso?</p>
                                    <p>No tendrá opción para deshacer esta acción.</p>
                                   <p>ID del Permiso: <strong id="modal-permit-id">-</strong></p>
                                  <p>Tipo de Permiso: <strong id="modal-permit-type">-</strong></p>
                                   <p>Solicitante: <strong id="modal-solicitante">-</strong></p>
                                    <p>Departamento: <strong id="modal-departamento">-</strong></p>
                                <div style="display:flex; justify-content:flex-end; gap:10px;">
                                <button id="btnCancelarConfirmar" type="button" style="background:#eee; color:#333; border:none; border-radius:4px; padding:6px 16px; cursor:pointer;">Cancelar</button>
                                <button id="btnConfirmarAutorizar" type="button" style="background:#2c3e50; color:#fff; border:none; border-radius:4px; padding:6px 16px; cursor:pointer;">Autorizar</button>
                                </div>
                            </div>
                        </div>

                         <div id="modalConfirmarNoAutorizar" class="modal-confirmar" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(44,62,80,0.25); z-index:1000; justify-content:center; align-items:center;">
                            <div style="background:#fff; border-radius:12px; max-width:400px; width:90vw; padding:2em 1.5em; box-shadow:0 4px 24px rgba(44,62,80,0.18); display:flex; flex-direction:column; gap:1em;">
                                <h3 style="margin:0 0 0.5em 0; font-size:1.2em; color:#2c3e50;">
                                <i class="ri-check-double-line" style="margin-right:8px;"></i>Confirmar No Autorización
                                </h3>
                                    <p>¿Estás seguro que deseas NO autorizar este permiso?</p>
                                    <p>Esta acción no se podrá deshacer. Luego deberás ingresar el motivo del rechazo.</p>
                                   <p>ID del Permiso: <strong id="modal-permit-id-no">-</strong></p>
                                  <p>Tipo de Permiso: <strong id="modal-permit-type-no">-</strong></p>
                                   <p>Solicitante: <strong id="modal-solicitante-no">-</strong></p>
                                    <p>Departamento: <strong id="modal-departamento-no">-</strong></p>
                                <div style="display:flex; justify-content:flex-end; gap:10px;">
                                <button id="btnCancelarConfirmarNo" type="button" style="background:#eee; color:#333; border:none; border-radius:4px; padding:6px 16px; cursor:pointer;">Cancelar</button>
                                <button id="btnConfirmarNoAutorizar" type="button" style="background:#c0392b; color:#fff; border:none; border-radius:4px; padding:6px 16px; cursor:pointer;">No Autorizar</button>
                                </div>
                            </div>
                        </div>
                        

                    </form>
                </div>
            </div>
        
        </div>

        
</body>
    
</html>



     <!-- <script src="/Modules/Fomularios/PT1/PT1.js"></script>-->

       <script src="/Modules/Fomularios/Generales/fecha_hora.js"></script>
     <script src="/Modules/Fomularios/PT1/PT1seccionsupervisor.js"></script>
</body>
</html>