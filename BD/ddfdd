-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.areas
(
    id_area integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    nombre character varying(100) COLLATE pg_catalog."default" NOT NULL,
    id_departamento integer,
    CONSTRAINT areas_pkey PRIMARY KEY (id_area)
);

CREATE TABLE IF NOT EXISTS public.ast
(
    id_ast integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    epp text COLLATE pg_catalog."default",
    maquinaria_equipo_herramientas text COLLATE pg_catalog."default",
    materiales_accesorios text COLLATE pg_catalog."default",
    CONSTRAINT ast_pkey PRIMARY KEY (id_ast)
);

CREATE TABLE IF NOT EXISTS public.ast_actividades
(
    id_ast_actividades integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    id_ast integer NOT NULL,
    num_actividad character varying(200) COLLATE pg_catalog."default",
    secuencia_actividad character varying(300) COLLATE pg_catalog."default",
    personal_ejecutor character varying(150) COLLATE pg_catalog."default",
    peligros_potenciales character varying(350) COLLATE pg_catalog."default",
    acciones_preventivas character varying(350) COLLATE pg_catalog."default",
    responsable character varying(150) COLLATE pg_catalog."default",
    CONSTRAINT ast_actividades_pkey PRIMARY KEY (id_ast_actividades)
);

CREATE TABLE IF NOT EXISTS public.ast_participan
(
    id_ast_participan integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    nombre character varying(250) COLLATE pg_catalog."default",
    credencial character varying(100) COLLATE pg_catalog."default",
    cargo character varying(100) COLLATE pg_catalog."default",
    funcion character varying(50) COLLATE pg_catalog."default",
    id_estatus integer NOT NULL,
    CONSTRAINT ast_participan_pkey PRIMARY KEY (id_ast_participan)
);

CREATE TABLE IF NOT EXISTS public.autorizaciones
(
    id_autorizacion integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    id_permiso integer,
    id_supervisor integer,
    id_categoria integer,
    responsable_area character varying(100) COLLATE pg_catalog."default",
    operador_area character varying(150) COLLATE pg_catalog."default",
    CONSTRAINT autorizaciones_pkey PRIMARY KEY (id_autorizacion)
);

CREATE TABLE IF NOT EXISTS public.categorias_seguridad
(
    id_categoria integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    nombre character varying(100) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT categorias_seguridad_pkey PRIMARY KEY (id_categoria)
);

CREATE TABLE IF NOT EXISTS public.departamentos
(
    id_departamento integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    nombre character varying(100) COLLATE pg_catalog."default" NOT NULL,
    correo character varying(100) COLLATE pg_catalog."default",
    extension character varying(20) COLLATE pg_catalog."default",
    "contraseña" character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT departamentos_pkey PRIMARY KEY (id_departamento)
);

CREATE TABLE IF NOT EXISTS public.estatus
(
    id_estatus integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    estatus character varying(100) COLLATE pg_catalog."default" NOT NULL,
    comentarios text COLLATE pg_catalog."default",
    CONSTRAINT estatus_pkey PRIMARY KEY (id_estatus)
);

CREATE TABLE IF NOT EXISTS public.jefe
(
    id_jefe serial NOT NULL,
    usuario character varying(50) COLLATE pg_catalog."default",
    "contraseña" character varying(100) COLLATE pg_catalog."default",
    CONSTRAINT jefe_pkey PRIMARY KEY (id_jefe)
);

CREATE TABLE IF NOT EXISTS public.permisos_trabajo
(
    id_permiso integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    fecha_hora timestamp without time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    id_area integer NOT NULL,
    id_departamento integer NOT NULL,
    id_sucursal integer NOT NULL,
    id_tipo_permiso integer NOT NULL,
    id_estatus integer NOT NULL,
    id_ast integer NOT NULL,
    prefijo character varying(50) COLLATE pg_catalog."default",
    contrato character varying(300) COLLATE pg_catalog."default",
    CONSTRAINT permisos_trabajo_pkey PRIMARY KEY (id_permiso)
);

CREATE TABLE IF NOT EXISTS public.pt_altura
(
    id integer NOT NULL DEFAULT nextval('pt_altura_id_altura_seq'::regclass),
    id_permiso integer NOT NULL,
    tipo_mantenimiento character varying(50) COLLATE pg_catalog."default",
    ot_numero character varying(50) COLLATE pg_catalog."default",
    tag character varying(100) COLLATE pg_catalog."default",
    hora_inicio time without time zone,
    equipo_intervenir character varying(200) COLLATE pg_catalog."default",
    descripcion_trabajo text COLLATE pg_catalog."default",
    nombre_solicitante character varying(150) COLLATE pg_catalog."default",
    empresa character varying(150) COLLATE pg_catalog."default",
    requiere_escalera character varying(3) COLLATE pg_catalog."default",
    requiere_canastilla_grua character varying(3) COLLATE pg_catalog."default",
    aseguramiento_estrobo character varying(3) COLLATE pg_catalog."default",
    requiere_andamio_cama_completa character varying(3) COLLATE pg_catalog."default",
    otro_tipo_acceso character varying(3) COLLATE pg_catalog."default",
    acceso_libre_obstaculos character varying(3) COLLATE pg_catalog."default",
    canastilla_asegurada character varying(3) COLLATE pg_catalog."default",
    andamio_completo character varying(3) COLLATE pg_catalog."default",
    andamio_seguros_zapatas character varying(3) COLLATE pg_catalog."default",
    escaleras_buen_estado character varying(3) COLLATE pg_catalog."default",
    linea_vida_segura character varying(3) COLLATE pg_catalog."default",
    arnes_completo_buen_estado character varying(3) COLLATE pg_catalog."default",
    suspender_trabajos_adyacentes character varying(3) COLLATE pg_catalog."default",
    numero_personas_autorizadas character varying(3) COLLATE pg_catalog."default",
    trabajadores_aptos_evaluacion character varying(3) COLLATE pg_catalog."default",
    requiere_barreras character varying(3) COLLATE pg_catalog."default",
    observaciones text COLLATE pg_catalog."default",
    fecha_creacion timestamp without time zone DEFAULT now(),
    fecha_actualizacion timestamp without time zone DEFAULT now(),
    CONSTRAINT pt_altura_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pt_apertura
(
    id serial NOT NULL,
    id_permiso integer NOT NULL,
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    tipo_mantenimiento character varying(50) COLLATE pg_catalog."default",
    otro_tipo_mantenimiento character varying(100) COLLATE pg_catalog."default",
    ot_numero character varying(50) COLLATE pg_catalog."default",
    tag character varying(100) COLLATE pg_catalog."default",
    hora_inicio time without time zone,
    tiene_equipo_intervenir boolean,
    descripcion_equipo text COLLATE pg_catalog."default",
    fluido character varying(100) COLLATE pg_catalog."default",
    presion character varying(50) COLLATE pg_catalog."default",
    temperatura character varying(50) COLLATE pg_catalog."default",
    antecedentes text COLLATE pg_catalog."default",
    requiere_herramientas_especiales character varying(10) COLLATE pg_catalog."default",
    tipo_herramientas_especiales character varying(255) COLLATE pg_catalog."default",
    herramientas_adecuadas character varying(10) COLLATE pg_catalog."default",
    requiere_verificacion_previa character varying(10) COLLATE pg_catalog."default",
    requiere_conocer_riesgos character varying(10) COLLATE pg_catalog."default",
    observaciones_medidas text COLLATE pg_catalog."default",
    fuera_operacion character varying(10) COLLATE pg_catalog."default",
    despresurizado_purgado character varying(10) COLLATE pg_catalog."default",
    necesita_aislamiento character varying(10) COLLATE pg_catalog."default",
    con_valvulas character varying(10) COLLATE pg_catalog."default",
    con_juntas_ciegas character varying(10) COLLATE pg_catalog."default",
    producto_entrampado character varying(10) COLLATE pg_catalog."default",
    requiere_lavado character varying(10) COLLATE pg_catalog."default",
    requiere_neutralizado character varying(10) COLLATE pg_catalog."default",
    requiere_vaporizado character varying(10) COLLATE pg_catalog."default",
    suspender_trabajos_adyacentes character varying(10) COLLATE pg_catalog."default",
    acordonar_area character varying(10) COLLATE pg_catalog."default",
    prueba_gas_toxico_inflamable character varying(10) COLLATE pg_catalog."default",
    equipo_electrico_desenergizado character varying(10) COLLATE pg_catalog."default",
    tapar_purgas_drenajes character varying(10) COLLATE pg_catalog."default",
    proteccion_especial_recomendada character varying(10) COLLATE pg_catalog."default",
    proteccion_piel_cuerpo character varying(10) COLLATE pg_catalog."default",
    proteccion_respiratoria character varying(10) COLLATE pg_catalog."default",
    proteccion_ocular character varying(10) COLLATE pg_catalog."default",
    proteccion_contraincendio character varying(10) COLLATE pg_catalog."default",
    tipo_proteccion_contraincendio character varying(255) COLLATE pg_catalog."default",
    instalacion_barreras character varying(10) COLLATE pg_catalog."default",
    observaciones_riesgos text COLLATE pg_catalog."default",
    co2_nivel character varying(20) COLLATE pg_catalog."default",
    nh3_nivel character varying(20) COLLATE pg_catalog."default",
    oxigeno_nivel character varying(20) COLLATE pg_catalog."default",
    lel_nivel character varying(20) COLLATE pg_catalog."default",
    descripcion_trabajo text COLLATE pg_catalog."default",
    nombre_solicitante character varying(150) COLLATE pg_catalog."default",
    empresa character varying(150) COLLATE pg_catalog."default",
    CONSTRAINT pt_apertura_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pt_confinados
(
    id serial NOT NULL,
    id_permiso integer,
    tipo_mantenimiento character varying(50) COLLATE pg_catalog."default",
    ot_numero character varying(100) COLLATE pg_catalog."default",
    tag character varying(100) COLLATE pg_catalog."default",
    hora_inicio time without time zone,
    equipo_intervenir text COLLATE pg_catalog."default",
    avisos_trabajos character varying(5) COLLATE pg_catalog."default",
    iluminacion_prueba_explosion character varying(5) COLLATE pg_catalog."default",
    ventilacion_forzada character varying(5) COLLATE pg_catalog."default",
    evaluacion_medica_aptos character varying(5) COLLATE pg_catalog."default",
    cable_vida_trabajadores character varying(5) COLLATE pg_catalog."default",
    vigilancia_exterior character varying(5) COLLATE pg_catalog."default",
    nombre_vigilante character varying(100) COLLATE pg_catalog."default",
    personal_rescatista character varying(5) COLLATE pg_catalog."default",
    nombre_rescatista character varying(100) COLLATE pg_catalog."default",
    instalar_barreras character varying(5) COLLATE pg_catalog."default",
    equipo_especial character varying(5) COLLATE pg_catalog."default",
    tipo_equipo_especial character varying(100) COLLATE pg_catalog."default",
    numero_personas_autorizadas character varying(50) COLLATE pg_catalog."default",
    tiempo_permanencia_min character varying(50) COLLATE pg_catalog."default",
    tiempo_recuperacion_min character varying(50) COLLATE pg_catalog."default",
    clase_espacio_confinado character varying(350) COLLATE pg_catalog."default",
    observaciones_adicionales text COLLATE pg_catalog."default",
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    descripcion_trabajo character varying(350) COLLATE pg_catalog."default",
    nombre_solicitante character varying(100) COLLATE pg_catalog."default",
    verificar_explosividad character varying(5) COLLATE pg_catalog."default",
    verificar_gas_toxico character varying(5) COLLATE pg_catalog."default",
    verificar_deficiencia_oxigeno character varying(5) COLLATE pg_catalog."default",
    verificar_enriquecimiento_oxigeno character varying(5) COLLATE pg_catalog."default",
    verificar_polvo_humos_fibras character varying(5) COLLATE pg_catalog."default",
    verificar_amoniaco character varying(5) COLLATE pg_catalog."default",
    verificar_material_piel character varying(5) COLLATE pg_catalog."default",
    verificar_temperatura character varying(5) COLLATE pg_catalog."default",
    verificar_lel character varying(5) COLLATE pg_catalog."default",
    suspender_trabajos_adyacentes character varying(5) COLLATE pg_catalog."default",
    acordonar_area character varying(5) COLLATE pg_catalog."default",
    prueba_gas_toxico_inflamable character varying(5) COLLATE pg_catalog."default",
    porcentaje_lel numeric(5, 2),
    nh3 numeric(5, 2),
    porcentaje_oxigeno numeric(5, 2),
    equipo_despresionado_fuera_operacion character varying(5) COLLATE pg_catalog."default",
    equipo_aislado character varying(5) COLLATE pg_catalog."default",
    equipo_aislado_valvula boolean DEFAULT false,
    equipo_aislado_junta_ciega boolean DEFAULT false,
    equipo_lavado character varying(5) COLLATE pg_catalog."default",
    equipo_neutralizado character varying(5) COLLATE pg_catalog."default",
    equipo_vaporizado character varying(5) COLLATE pg_catalog."default",
    aislar_purgas_drenaje_venteo character varying(5) COLLATE pg_catalog."default",
    abrir_registros_necesarios character varying(5) COLLATE pg_catalog."default",
    observaciones_requisitos text COLLATE pg_catalog."default",
    fluido character varying(100) COLLATE pg_catalog."default",
    presion character varying(50) COLLATE pg_catalog."default",
    temperatura character varying(50) COLLATE pg_catalog."default",
    CONSTRAINT pt_confinados_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pt_electrico
(
    id serial NOT NULL,
    id_permiso integer,
    tipo_mantenimiento character varying(50) COLLATE pg_catalog."default",
    tipo_mantenimiento_otro character varying(255) COLLATE pg_catalog."default",
    ot_numero character varying(100) COLLATE pg_catalog."default",
    tag character varying(100) COLLATE pg_catalog."default",
    hora_inicio time without time zone,
    equipo_intervenir text COLLATE pg_catalog."default",
    empresa character varying(255) COLLATE pg_catalog."default",
    descripcion_trabajo text COLLATE pg_catalog."default",
    nombre_solicitante character varying(255) COLLATE pg_catalog."default",
    equipo_desenergizado character varying(10) COLLATE pg_catalog."default",
    interruptores_abiertos character varying(10) COLLATE pg_catalog."default",
    verificar_ausencia_voltaje character varying(10) COLLATE pg_catalog."default",
    candados_equipo character varying(10) COLLATE pg_catalog."default",
    tarjetas_alerta character varying(10) COLLATE pg_catalog."default",
    aviso_personal_area character varying(10) COLLATE pg_catalog."default",
    tapetes_dielectricos character varying(10) COLLATE pg_catalog."default",
    herramienta_aislante character varying(10) COLLATE pg_catalog."default",
    pertiga_telescopica character varying(10) COLLATE pg_catalog."default",
    equipo_proteccion_especial character varying(10) COLLATE pg_catalog."default",
    tipo_equipo_proteccion character varying(255) COLLATE pg_catalog."default",
    aterrizar_equipo character varying(10) COLLATE pg_catalog."default",
    barricadas_area character varying(10) COLLATE pg_catalog."default",
    observaciones_adicionales text COLLATE pg_catalog."default",
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT pt_electrico_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pt_fuego
(
    id serial NOT NULL,
    id_permiso integer,
    tipo_mantenimiento character varying(50) COLLATE pg_catalog."default",
    tipo_mantenimiento_otro character varying(255) COLLATE pg_catalog."default",
    ot_numero character varying(100) COLLATE pg_catalog."default",
    tag character varying(100) COLLATE pg_catalog."default",
    hora_inicio time without time zone,
    equipo_intervenir text COLLATE pg_catalog."default",
    empresa character varying(255) COLLATE pg_catalog."default",
    descripcion_trabajo text COLLATE pg_catalog."default",
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    nombre_solicitante character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT pt_fuego_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pt_no_peligroso
(
    id_ptnp integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    id_permiso integer NOT NULL,
    nombre_solicitante character varying(100) COLLATE pg_catalog."default" NOT NULL,
    descripcion_trabajo character varying(350) COLLATE pg_catalog."default" NOT NULL,
    tipo_mantenimiento character varying(50) COLLATE pg_catalog."default" NOT NULL,
    ot_no character varying(50) COLLATE pg_catalog."default",
    equipo_intervencion character varying(100) COLLATE pg_catalog."default",
    hora_inicio timestamp without time zone NOT NULL,
    tag character varying(50) COLLATE pg_catalog."default",
    fluido character varying(50) COLLATE pg_catalog."default",
    presion character varying(20) COLLATE pg_catalog."default",
    temperatura character varying(20) COLLATE pg_catalog."default",
    empresa character varying(250) COLLATE pg_catalog."default",
    trabajo_area_riesgo_controlado character varying(2) COLLATE pg_catalog."default",
    necesita_entrega_fisica character varying(2) COLLATE pg_catalog."default",
    necesita_ppe_adicional character varying(2) COLLATE pg_catalog."default",
    area_circundante_riesgo character varying(2) COLLATE pg_catalog."default",
    necesita_supervision character varying(2) COLLATE pg_catalog."default",
    observaciones_analisis_previo text COLLATE pg_catalog."default",
    CONSTRAINT pt_no_peligroso_pkey PRIMARY KEY (id_ptnp)
);

CREATE TABLE IF NOT EXISTS public.pt_radiacion
(
    id serial NOT NULL,
    id_permiso integer,
    tipo_mantenimiento character varying(50) COLLATE pg_catalog."default",
    tipo_mantenimiento_otro character varying(255) COLLATE pg_catalog."default",
    ot_numero character varying(100) COLLATE pg_catalog."default",
    tag character varying(100) COLLATE pg_catalog."default",
    hora_inicio time without time zone,
    equipo_intervenir text COLLATE pg_catalog."default",
    empresa character varying(255) COLLATE pg_catalog."default",
    descripcion_trabajo text COLLATE pg_catalog."default",
    nombre_solicitante character varying(255) COLLATE pg_catalog."default",
    tipo_fuente_radiactiva character varying(255) COLLATE pg_catalog."default",
    actividad_radiactiva character varying(100) COLLATE pg_catalog."default",
    numero_serial_fuente character varying(100) COLLATE pg_catalog."default",
    distancia_trabajo character varying(50) COLLATE pg_catalog."default",
    tiempo_exposicion character varying(50) COLLATE pg_catalog."default",
    dosis_estimada character varying(50) COLLATE pg_catalog."default",
    equipo_proteccion_radiologica character varying(10) COLLATE pg_catalog."default",
    dosimetros_personales character varying(10) COLLATE pg_catalog."default",
    monitores_radiacion_area character varying(10) COLLATE pg_catalog."default",
    senalizacion_area character varying(10) COLLATE pg_catalog."default",
    barricadas character varying(10) COLLATE pg_catalog."default",
    protocolo_emergencia character varying(10) COLLATE pg_catalog."default",
    personal_autorizado character varying(10) COLLATE pg_catalog."default",
    observaciones_radiacion text COLLATE pg_catalog."default",
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT pt_radiacion_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.sucursales
(
    id_sucursal integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    nombre character varying(100) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT sucursales_pkey PRIMARY KEY (id_sucursal)
);

CREATE TABLE IF NOT EXISTS public.supervisores
(
    id_supervisor integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    nombre character varying(100) COLLATE pg_catalog."default" NOT NULL,
    correo character varying(100) COLLATE pg_catalog."default",
    extension character varying(20) COLLATE pg_catalog."default",
    "contraseña" character varying(255) COLLATE pg_catalog."default" NOT NULL,
    usuario character varying(150) COLLATE pg_catalog."default",
    CONSTRAINT supervisores_pkey PRIMARY KEY (id_supervisor)
);

CREATE TABLE IF NOT EXISTS public.tipos_permisos
(
    id_tipo_permiso integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    nombre character varying(100) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT tipos_permisos_pkey PRIMARY KEY (id_tipo_permiso)
);

ALTER TABLE IF EXISTS public.areas
    ADD CONSTRAINT fk_areas_departamentos FOREIGN KEY (id_departamento)
    REFERENCES public.departamentos (id_departamento) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.ast_actividades
    ADD CONSTRAINT ast_actividades_id_ast_fkey FOREIGN KEY (id_ast)
    REFERENCES public.ast (id_ast) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.ast_participan
    ADD CONSTRAINT ast_participan_id_estatus_fkey FOREIGN KEY (id_estatus)
    REFERENCES public.estatus (id_estatus) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.autorizaciones
    ADD CONSTRAINT autorizaciones_id_categoria_fkey FOREIGN KEY (id_categoria)
    REFERENCES public.categorias_seguridad (id_categoria) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.autorizaciones
    ADD CONSTRAINT autorizaciones_id_supervisor_fkey FOREIGN KEY (id_supervisor)
    REFERENCES public.supervisores (id_supervisor) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.permisos_trabajo
    ADD CONSTRAINT permisos_trabajo_id_area_fkey FOREIGN KEY (id_area)
    REFERENCES public.areas (id_area) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.permisos_trabajo
    ADD CONSTRAINT permisos_trabajo_id_ast_fkey FOREIGN KEY (id_ast)
    REFERENCES public.ast (id_ast) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.permisos_trabajo
    ADD CONSTRAINT permisos_trabajo_id_departamento_fkey FOREIGN KEY (id_departamento)
    REFERENCES public.departamentos (id_departamento) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.permisos_trabajo
    ADD CONSTRAINT permisos_trabajo_id_estatus_fkey FOREIGN KEY (id_estatus)
    REFERENCES public.estatus (id_estatus) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.permisos_trabajo
    ADD CONSTRAINT permisos_trabajo_id_sucursal_fkey FOREIGN KEY (id_sucursal)
    REFERENCES public.sucursales (id_sucursal) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.permisos_trabajo
    ADD CONSTRAINT permisos_trabajo_id_tipo_permiso_fkey FOREIGN KEY (id_tipo_permiso)
    REFERENCES public.tipos_permisos (id_tipo_permiso) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pt_altura
    ADD CONSTRAINT fk_permiso_altura FOREIGN KEY (id_permiso)
    REFERENCES public.permisos_trabajo (id_permiso) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.pt_apertura
    ADD CONSTRAINT pt_apertura_id_permiso_fkey FOREIGN KEY (id_permiso)
    REFERENCES public.permisos_trabajo (id_permiso) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pt_confinados
    ADD CONSTRAINT pt_confinados_id_permiso_fkey FOREIGN KEY (id_permiso)
    REFERENCES public.permisos_trabajo (id_permiso) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pt_electrico
    ADD CONSTRAINT pt_electrico_id_permiso_fkey FOREIGN KEY (id_permiso)
    REFERENCES public.permisos_trabajo (id_permiso) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pt_fuego
    ADD CONSTRAINT pt_fuego_id_permiso_fkey FOREIGN KEY (id_permiso)
    REFERENCES public.permisos_trabajo (id_permiso) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pt_no_peligroso
    ADD CONSTRAINT pt_no_peligroso_id_permiso_fkey FOREIGN KEY (id_permiso)
    REFERENCES public.permisos_trabajo (id_permiso) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pt_radiacion
    ADD CONSTRAINT pt_radiacion_id_permiso_fkey FOREIGN KEY (id_permiso)
    REFERENCES public.permisos_trabajo (id_permiso) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;